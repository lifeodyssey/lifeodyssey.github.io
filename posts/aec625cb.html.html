<!DOCTYPE html><html class="font-sans scroll-smooth" lang=zh-CN><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,viewport-fit=cover" name=viewport><link href=/icons/favicon.svg rel=icon type=image/svg+xml><title>Evaluating ChatGPTo1-preview, and Claude 3.5 sonnet | 乔克叔叔的床边故事</title><meta content="Let's compare in two way, Algorithm and system design. TLDR: ChatGP o1-preview, excels in both algorithmic and system de..." name=description><meta content=周大侠 name=author><meta content="Astro v5.13.7" name=generator><meta content="oklch(96% 0.005 298)" name=theme-color><link href=/fonts/EarlySummer-VF-Split/EarlySummer-VF-Subset.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Snell-Black-SF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Snell-Bold-SF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/STIX-VF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/STIX-Italic-VF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/_astro/katex.min.COXD5gRV.css rel=stylesheet media=print onload="this.media=&#34;all&#34;"><link href=https://lifeodyssey.github.io/posts/aec625cb.html.html rel=canonical><link href=/sitemap-index.xml rel=sitemap><link href=/rss.xml rel=alternate type=application/rss+xml title="RSS Feed"><link href=/atom.xml rel=alternate type=application/atom+xml title="Atom Feed"><link href=https://lifeodyssey.github.io rel=alternate hreflang=zh><link href=https://lifeodyssey.github.io/en/ rel=alternate hreflang=en><link href=https://lifeodyssey.github.io/ja/ rel=alternate hreflang=ja><meta content=article property=og:type><meta content=https://lifeodyssey.github.io/posts/aec625cb.html.html property=og:url><meta content="Evaluating ChatGPTo1-preview, and Claude 3.5 sonnet | 乔克叔叔的床边故事" property=og:title><meta content="Let's compare in two way, Algorithm and system design. TLDR: ChatGP o1-preview, excels in both algorithmic and system de..." property=og:description><meta content=https://lifeodyssey.github.io/og/aec625cb.png property=og:image><meta content=summary_large_image name=twitter:card><meta content=true name=astro-view-transitions-enabled><meta content=none name=astro-view-transitions-fallback><script type=module src=/_astro/ClientRouter.astro_astro_type_script_index_0_lang.1k2cUud7.js></script><script>!function(){function e(e=document){const t=function(){const e=localStorage.getItem("theme");return!!e&&"dark"===e}();e.documentElement.classList.toggle("dark",t);const n=e.head.querySelector('meta[name="theme-color"]');n&&n.setAttribute("content",t?"oklch(22% 0.005 298)":"oklch(96% 0.005 298)")}function t(e=document){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches||!("startViewTransition"in e);e.documentElement.classList.toggle("reduce-motion",t)}document.addEventListener("astro:before-swap",(({newDocument:n})=>{e(n),t(n)})),e(),t()}()</script><link href=/_astro/_about_.Dzb1Me_E.css rel=stylesheet><link href=/_astro/_posts_slug_.CM85RmC-.css rel=stylesheet><script type=module src=/_astro/page.BNYwb576.js></script><script>!function(t,e,n,r){(window.crossOriginIsolated||navigator.serviceWorker)&&((r=t[e]=Object.assign(t[e]||{},{lib:"/~partytown/",debug:!1}))[n]=(r[n]||[]).concat(["dataLayer.push","gtag"]))}(window,"partytown","forward");const tp={preserveBehavior:!1},ep=t=>{if("string"==typeof t)return[t,tp];const[e,n=tp]=t;return[e,{...tp,...n}]},n=Object.freeze((()=>{const t=new Set;let e=[];do{Object.getOwnPropertyNames(e).forEach((n=>{"function"==typeof e[n]&&t.add(n)}))}while((e=Object.getPrototypeOf(e))!==Object.prototype);return Array.from(t)})());!function(t,e,r,o,i,a,s,c,d,p,l=t,u){function f(){u||(u=1,"/"==(s=(a.lib||"/~partytown/")+(a.debug?"debug/":""))[0]&&(d=e.querySelectorAll('script[type="text/partytown"]'),o!=t?o.dispatchEvent(new CustomEvent("pt1",{detail:t})):(c=setTimeout(w,(null==a?void 0:a.fallbackTimeout)||1e4),e.addEventListener("pt0",h),i?y(1):r.serviceWorker?r.serviceWorker.register(s+(a.swPath||"partytown-sw.js"),{scope:s}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):w())))}function y(n){p=e.createElement(n?"script":"iframe"),t._pttab=Date.now(),n||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=s+"partytown-"+(n?"atomics.js?v=0.11.1":"sandbox-sw.html?"+t._pttab),e.querySelector(a.sandboxParent||"body").appendChild(p)}function w(n,r){for(h(),o==t&&(a.forward||[]).map((function(e){const[n]=ep(e);delete t[n.split(".")[0]]})),n=0;n<d.length;n++)(r=e.createElement("script")).innerHTML=d[n].innerHTML,r.nonce=a.nonce,e.head.appendChild(r);p&&p.parentNode.removeChild(p)}function h(){clearTimeout(c)}a=t.partytown||{},o==t&&(a.forward||[]).map((function(e){const[r,{preserveBehavior:o}]=ep(e);l=t,r.split(".").map((function(e,r,i){var a;l=l[i[r]]=r+1<i.length?l[i[r]]||(a=i[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(o){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,i);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(i,arguments),n}})()}))})),"complete"==e.readyState?f():(t.addEventListener("DOMContentLoaded",f),t.addEventListener("load",f))}(window,document,navigator,top,window.crossOriginIsolated),document.addEventListener("astro:before-swap",(t=>{let e=document.body.querySelector("iframe[src*='/~partytown/']");e&&t.newDocument.body.append(e)}))</script><style>[data-astro-transition-scope=astro-va26yt7w-1]{view-transition-name:post-aec625cb-zh}@layer astro{::view-transition-old(post-aec625cb-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(post-aec625cb-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(post-aec625cb-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(post-aec625cb-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-aqc54ihn-2]{view-transition-name:time-aec625cb-zh}@layer astro{::view-transition-old(time-aec625cb-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(time-aec625cb-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(time-aec625cb-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(time-aec625cb-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-wif6pdce-3]{view-transition-name:site-title-zh}@layer astro{::view-transition-old(site-title-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(site-title-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(site-title-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(site-title-zh){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style></head><body><div class="w-full max-w-205.848 min-h-dvh min-h-vh mx-auto" lg="mx-[max(5.75rem,calc(50vw-34.25rem))] my-20 max-w-[min(calc(75vw-16rem),44rem)] min-h-full p-0" p="x-[min(7.25vw,3.731rem)] y-10"><header class="cjk:tracking-0.02em lg:uno-desktop-column lg:top-20 mb-10.8"><h2 class="c-secondary font-bold font-title lg:c-primary lg:mb-1.8 lg:mt-0 lg:text-9 mb-2.8 mt-3 text-5.375"><div class="inline-block box-content pr-1" data-astro-transition-scope=astro-wif6pdce-3 data-disable-theme-transition><a href=/ id=site-title-link>乔克叔叔的床边故事</a></div></h2></header><nav aria-label="Site Navigation" class="hidden cjk:tracking-0.02em font-navbar font-semibold leading-2.45em lg:block lg:bottom-[min(9.04rem+3.85vw,12.5rem)] lg:text-4 lg:uno-desktop-column mb-10.5 text-3.6"><ul><li><a href=/ class="c-primary after:bottom-0.7em font-bold highlight-static">文章</a></li><li><a href=/tags/ class="highlight-hover hover:c-primary after:bottom-0.7em hover:font-bold transition-[colors,font-weight]">标签</a></li><li><a href=/about/ class="highlight-hover hover:c-primary after:bottom-0.7em hover:font-bold transition-[colors,font-weight]">关于</a></li><li><a href=/search/ class="highlight-hover hover:c-primary after:bottom-0.7em hover:font-bold transition-[colors,font-weight]">Search</a></li></ul></nav><main class=mb-10><article class=heti><div class=relative><button aria-label="Go back" class=hidden id=back-button lg="absolute left--10 top-3.8 block aspect-square w-4.5 c-secondary/40 transition-colors ease-out hover:c-secondary/80 active:scale-90!"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d=M17.8.7L4,12l13.8,11.4.7-.9L7.2,12,18.5,1.5l-.7-.8Z /></svg></button><script type=module>function e(t){if(!(t.target instanceof Element?t.target:null)?.closest("#back-button"))return;if(window.history.length>1)return void window.history.back();const e=document.getElementById("site-title-link");e&&e.click()}document.addEventListener("click",e,{passive:!0})</script><h1 class=post-title><span data-astro-transition-scope=astro-va26yt7w-1 data-disable-theme-transition>Evaluating ChatGPTo1-preview, and Claude 3.5 sonnet</span></h1></div><div class="c-primary block font-time mb-17.2" data-astro-transition-scope=astro-aqc54ihn-2 data-disable-theme-transition id=post-date><time datetime=2024-09-14>2024-09-14 </time><span class=ml-1.75>15 min</span></div><div class="2xl:bg-secondary/0 2xl:border-none 2xl:fixed 2xl:left-0 2xl:max-w-[min(calc(50vw-38rem),13rem)] 2xl:top-44.5 bg-secondary/5 mb-6 uno-round-border" data-astro-cid-v5otsao3 id=toc-container><input data-astro-cid-v5otsao3 hidden id=toc-toggle type=checkbox><div class="relative h-12 w-full" data-astro-cid-v5otsao3><label class="flex absolute inset-0 items-center 2xl:c-secondary/40 2xl:ease-out 2xl:flex 2xl:hover:c-secondary/80 2xl:static 2xl:transition-colors cursor-pointer" data-astro-cid-v5otsao3 for=toc-toggle><span data-astro-cid-v5otsao3 id=toc-mobile-text>目录</span><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24" class="ml-4 2xl:active:scale-90! 2xl:block 2xl:mt-4 2xl:origin-center aspect-square hidden w-4.2" data-astro-cid-v5otsao3=true id=toc-desktop-icon><path d="M22.2 2.3H1.8V4h19.9zM22.2 20H1.8v1.7h19.9zM15.5 11.2H1.8v1.6H15z"/></svg></label></div><div id=toc-accordion-wrapper data-astro-cid-v5otsao3><nav aria-label="Table of Contents" data-astro-cid-v5otsao3 id=toc-accordion-content><ul data-astro-cid-v5otsao3 id=toc-links-list><li class=ml-0 data-astro-cid-v5otsao3><a href=#first-round class="highlight-hover no-heti toc-links-h2" data-astro-cid-v5otsao3>First round</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#chatgpt-o1-preview class="highlight-hover no-heti toc-links-h3" data-astro-cid-v5otsao3>ChatGPT o1-preview</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#claude-35-sonnet class="highlight-hover no-heti toc-links-h3" data-astro-cid-v5otsao3>Claude 3.5 sonnet</a></li><li class=ml-0 data-astro-cid-v5otsao3><a href=#second-round class="highlight-hover no-heti toc-links-h2" data-astro-cid-v5otsao3>Second round</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#chatgpt-o1-preview-1 class="highlight-hover no-heti toc-links-h3" data-astro-cid-v5otsao3>ChatGPT o1-preview</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#claude-35-sonnet-1 class="highlight-hover no-heti toc-links-h3" data-astro-cid-v5otsao3>Claude 3.5 sonnet</a></li><li class=ml-0 data-astro-cid-v5otsao3><a href=#summary class="highlight-hover no-heti toc-links-h2" data-astro-cid-v5otsao3>Summary</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#chatgpt-o1-preview-2 class="highlight-hover no-heti toc-links-h3" data-astro-cid-v5otsao3>ChatGPT o1-preview</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#1-requirements-summary class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>1. Requirements Summary</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#2-high-level-architecture class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>2. High-Level Architecture</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#3-data-modeling class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>3. Data Modeling</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#4-autocomplete-logic class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>4. Autocomplete Logic</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#5-scalability-and-performance class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>5. Scalability and Performance</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#6-data-pipeline-for-updates class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>6. Data Pipeline for Updates</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#7-infrastructure-and-technology-stack class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>7. Infrastructure and Technology Stack</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#8-handling-high-qps class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>8. Handling High QPS</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#9-latency-minimization class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>9. Latency Minimization</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#10-data-freshness-and-updates class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>10. Data Freshness and Updates</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#11-monitoring-and-alerting class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>11. Monitoring and Alerting</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#12-security-and-compliance class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>12. Security and Compliance</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#13-optional-features class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>13. Optional Features</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#14-development-and-deployment-plan class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>14. Development and Deployment Plan</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#15-cost-considerations class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>15. Cost Considerations</a></li><li class=ml-8 data-astro-cid-v5otsao3><a href=#conclusion class="highlight-hover no-heti toc-links-h4" data-astro-cid-v5otsao3>Conclusion</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#claude-35-sonnet-2 class="highlight-hover no-heti toc-links-h3" data-astro-cid-v5otsao3>Claude 3.5 sonnet</a></li><li class=ml-0 data-astro-cid-v5otsao3><a href=#summary-1 class="highlight-hover no-heti toc-links-h2" data-astro-cid-v5otsao3>Summary</a></li></ul></nav></div></div><script type=module>let s=null,i=null;function g(){if(!(window.innerWidth>=1536))return;const t=document.getElementById("toc-accordion-content");if(!t)return;const e=t.getElementsByTagName("a");if(0===e.length)return;const n=Array.from(e,(t=>t)),o=n.some((t=>t.classList.contains("toc-links-h2")))?"toc-links-h2":"toc-links-h3",c=new Map;n.forEach((t=>{const e=t.getAttribute("href")?.substring(1);e&&c.set(e,t)}));let r=null;function l(t){t!==r&&(n.forEach((t=>{t.classList.remove("toc-link-active")})),t.classList.add("toc-link-active"),t.classList.contains(o)||function(t){for(let e=n.indexOf(t)-1;e>=0;e--){const t=n[e];if(t.classList.contains(o)){t.classList.add("toc-link-active");break}}}(t),r=t,t.scrollIntoView({behavior:"smooth",block:"nearest"}))}s=new IntersectionObserver((t=>{const e=t.find((t=>t.isIntersecting))?.target?.id;if(e){const t=c.get(e);t&&l(t)}}),{rootMargin:"0% 0% -66% 0%",threshold:[.4]}),Array.from(document.querySelectorAll("h2, h3, h4")).filter((t=>t.id&&"footnotes"!==t.id)).forEach((t=>s?.observe(t)));const a=document.getElementById("post-copyright");a&&(i=new IntersectionObserver((t=>{!t[0].isIntersecting&&t[0].boundingClientRect.top<0&&(n.forEach((t=>t.classList.remove("toc-link-active"))),r=null)}),{rootMargin:"0px 0px 0px 0px",threshold:0}),i?.observe(a),n.length>0&&l(n[0]))}function m(){s?.disconnect(),i?.disconnect(),s=null,i=null}document.addEventListener("astro:after-swap",g),document.addEventListener("astro:before-swap",m),g()</script><div id=post-content><p>Let’s compare in two way, Algorithm and system design.</p><p>TLDR: ChatGP o1-preview, excels in both algorithmic and system design. Therefore, I will cancel my Claude 3.5 Sonnet subscription and continue using ChatGPT.</p><h1 id=algorithm>Algorithm<a href=#algorithm class=heading-anchor-link aria-label="Link to Algorithm"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h1><p>The question is <a href=https://atcoder.jp/contests/typical90/tasks/typical90_by rel="nofollow noopener noreferrer external" target=_blank>077 - Planes on a 2D Plane（★7）</a>)</p><h2 id=first-round>First round<a href=#first-round class=heading-anchor-link aria-label="Link to First round"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h2><p>Let’s see the result without any promote and do not provide any test case.</p><h3 id=chatgpt-o1-preview>ChatGPT o1-preview<a href=#chatgpt-o1-preview class=heading-anchor-link aria-label="Link to ChatGPT o1-preview"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=python style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6a737d;--shiki-dark:#6A737D># Read input</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> sys</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> threading</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>def</span><span style=color:#6f42c1;--shiki-dark:#B392F0> main</span><span style=color:#24292e;--shiki-dark:#E1E4E8>():</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> sys</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    sys.setrecursionlimit(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#d73a49;--shiki-dark:#F97583> &#x3C;&#x3C;</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 25</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    N, T </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, sys.stdin.readline().split())</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    AX</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    AY</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        x, y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, sys.stdin.readline().split())</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>        AX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.append(x)</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>        AY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.append(y)</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    BX</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    BY</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        x, y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, sys.stdin.readline().split())</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>        BX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.append(x)</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>        BY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.append(y)</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    direction_map </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>2</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>3</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>4</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>5</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>6</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>7</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>8</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    }</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    D </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> AX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i] </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> BX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i] </span><span style=color:#d73a49;--shiki-dark:#F97583>or</span><span style=color:#005cc5;--shiki-dark:#79B8FF> AY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i] </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> BY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i]:</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>                print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"No"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                return</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            D.append(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)  </span><span style=color:#6a737d;--shiki-dark:#6A737D># Assign any direction</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    else</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> BX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i] </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF> AX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> BY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i] </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF> AY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i]</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>%</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#d73a49;--shiki-dark:#F97583> or</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>%</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>                print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"No"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                return</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            dx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>//</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            dy </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>//</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> dx </span><span style=color:#d73a49;--shiki-dark:#F97583>not</span><span style=color:#d73a49;--shiki-dark:#F97583> in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>or</span><span style=color:#24292e;--shiki-dark:#E1E4E8> dy </span><span style=color:#d73a49;--shiki-dark:#F97583>not</span><span style=color:#d73a49;--shiki-dark:#F97583> in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]:</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>                print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"No"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                return</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> dx </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#d73a49;--shiki-dark:#F97583> and</span><span style=color:#24292e;--shiki-dark:#E1E4E8> dy </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>                print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"No"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                return</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (dx, dy) </span><span style=color:#d73a49;--shiki-dark:#F97583>not</span><span style=color:#d73a49;--shiki-dark:#F97583> in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> direction_map:</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>                print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"No"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                return</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            D.append(direction_map[(dx, dy)])</span></span>
<span class=line></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"Yes"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>' '</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.join(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>str</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, D)))</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>threading.Thread(</span><span style=color:#e36209;--shiki-dark:#FFAB70>target</span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8>main).start()</span></span></code></pre></div><figure><img alt=result src=https://raw.githubusercontent.com/lifeodyssey/Figurebed/master/202409141929962.png><figcaption>result</figcaption></figure><h3 id=claude-35-sonnet>Claude 3.5 sonnet<a href=#claude-35-sonnet class=heading-anchor-link aria-label="Link to Claude 3.5 sonnet"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=python style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#d73a49;--shiki-dark:#F97583>import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> sys</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>def</span><span style=color:#6f42c1;--shiki-dark:#B392F0> get_possible_directions</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(ax, ay, bx, by, t):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    dx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> bx </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ax</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    dy </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> by </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ay</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    possible </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>9</span><span style=color:#24292e;--shiki-dark:#E1E4E8>):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        nx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ax </span><span style=color:#d73a49;--shiki-dark:#F97583>+</span><span style=color:#24292e;--shiki-dark:#E1E4E8> t </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>][d</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        ny </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ay </span><span style=color:#d73a49;--shiki-dark:#F97583>+</span><span style=color:#24292e;--shiki-dark:#E1E4E8> t </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>][d</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> nx </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#24292e;--shiki-dark:#E1E4E8> bx </span><span style=color:#d73a49;--shiki-dark:#F97583>and</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ny </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#24292e;--shiki-dark:#E1E4E8> by:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            possible.append(d)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    return</span><span style=color:#24292e;--shiki-dark:#E1E4E8> possible</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>def</span><span style=color:#6f42c1;--shiki-dark:#B392F0> solve</span><span style=color:#24292e;--shiki-dark:#E1E4E8>():</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    n, t </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>input</span><span style=color:#24292e;--shiki-dark:#E1E4E8>().split())</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    a </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>list</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>input</span><span style=color:#24292e;--shiki-dark:#E1E4E8>().split())) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(n)]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    b </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>list</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>input</span><span style=color:#24292e;--shiki-dark:#E1E4E8>().split())) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(n)]</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    directions </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [get_possible_directions(ax, ay, bx, by, t) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (ax, ay), (bx, by) </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> zip</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(a, b)]</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> any</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>len</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(d) </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#d73a49;--shiki-dark:#F97583> for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> directions):</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        return</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "No"</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    while</span><span style=color:#005cc5;--shiki-dark:#79B8FF> True</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        changed </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> False</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(n):</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> len</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(directions[i]) </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                continue</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> directions[i][:]:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                nx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> a[i][</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>+</span><span style=color:#24292e;--shiki-dark:#E1E4E8> t </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>][d</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                ny </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> a[i][</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>+</span><span style=color:#24292e;--shiki-dark:#E1E4E8> t </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>][d</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (nx, ny) </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [(ax, ay) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> j, (ax, ay) </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> enumerate</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(a) </span><span style=color:#d73a49;--shiki-dark:#F97583>if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> j </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i]:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                    directions[i].remove(d)</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                    changed </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> True</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                    break</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> len</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(directions[i]) </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                return</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "No"</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        if</span><span style=color:#d73a49;--shiki-dark:#F97583> not</span><span style=color:#24292e;--shiki-dark:#E1E4E8> changed:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            break</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> all</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>len</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(d) </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1</span><span style=color:#d73a49;--shiki-dark:#F97583> for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> directions):</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        return</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "Yes</span><span style=color:#005cc5;--shiki-dark:#79B8FF>\n</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"</span><span style=color:#d73a49;--shiki-dark:#F97583> +</span><span style=color:#032f62;--shiki-dark:#9ECBFF> " "</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.join(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>str</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(d[</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> directions)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    else</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        return</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "No"</span></span>
<span class=line></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(solve())</span></span></code></pre></div><figure><img alt=result src=https://raw.githubusercontent.com/lifeodyssey/Figurebed/master/202409141932388.png><figcaption>result</figcaption></figure><h2 id=second-round>Second round<a href=#second-round class=heading-anchor-link aria-label="Link to Second round"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h2><p>Let’s give some test cases to them.</p><h3 id=chatgpt-o1-preview-1>ChatGPT o1-preview<a href=#chatgpt-o1-preview-1 class=heading-anchor-link aria-label="Link to ChatGPT o1-preview"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=python style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#d73a49;--shiki-dark:#F97583>import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> sys</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> threading</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>def</span><span style=color:#6f42c1;--shiki-dark:#B392F0> main</span><span style=color:#24292e;--shiki-dark:#E1E4E8>():</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> sys</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    sys.setrecursionlimit(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#d73a49;--shiki-dark:#F97583> &#x3C;&#x3C;</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 25</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    N, T </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, sys.stdin.readline().split())</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    AX</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    AY</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        x, y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, sys.stdin.readline().split())</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>        AX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.append(x)</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>        AY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.append(y)</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    BX</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    BY</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        x, y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, sys.stdin.readline().split())</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>        BX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.append(x)</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>        BY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.append(y)</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    direction_map </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>2</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>3</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>4</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>5</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>6</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>7</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        (</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>): </span><span style=color:#005cc5;--shiki-dark:#79B8FF>8</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    }</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    from</span><span style=color:#24292e;--shiki-dark:#E1E4E8> collections </span><span style=color:#d73a49;--shiki-dark:#F97583>import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> deque</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d;--shiki-dark:#6A737D>    # Build the bipartite graph</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    graph </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [[] </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N)]</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):  </span><span style=color:#6a737d;--shiki-dark:#6A737D># For each plane</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> j </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):  </span><span style=color:#6a737d;--shiki-dark:#6A737D># For each possible final position</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> BX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[j] </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF> AX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> BY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[j] </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF> AY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i]</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#d73a49;--shiki-dark:#F97583> and</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                    graph[i].append(j)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            else</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>%</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#d73a49;--shiki-dark:#F97583> or</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>%</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                    continue</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                dx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>//</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                dy </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>//</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> dx </span><span style=color:#d73a49;--shiki-dark:#F97583>not</span><span style=color:#d73a49;--shiki-dark:#F97583> in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>or</span><span style=color:#24292e;--shiki-dark:#E1E4E8> dy </span><span style=color:#d73a49;--shiki-dark:#F97583>not</span><span style=color:#d73a49;--shiki-dark:#F97583> in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                    continue</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> dx </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#d73a49;--shiki-dark:#F97583> and</span><span style=color:#24292e;--shiki-dark:#E1E4E8> dy </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                    continue</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (dx, dy) </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> direction_map:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                    graph[i].append(j)</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d;--shiki-dark:#6A737D>    # Bipartite matching (Kuhn's algorithm)</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    match_to </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> N</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    def</span><span style=color:#6f42c1;--shiki-dark:#B392F0> bpm</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(u, vis):</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> v </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> graph[u]:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#d73a49;--shiki-dark:#F97583> not</span><span style=color:#24292e;--shiki-dark:#E1E4E8> vis[v]:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                vis[v] </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> True</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> match_to[v] </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#d73a49;--shiki-dark:#F97583> -</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#d73a49;--shiki-dark:#F97583> or</span><span style=color:#24292e;--shiki-dark:#E1E4E8> bpm(match_to[v], vis):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                    match_to[v] </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> u</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                    return</span><span style=color:#005cc5;--shiki-dark:#79B8FF> True</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        return</span><span style=color:#005cc5;--shiki-dark:#79B8FF> False</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    result </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> u </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        vis </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>False</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> N</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        if</span><span style=color:#d73a49;--shiki-dark:#F97583> not</span><span style=color:#24292e;--shiki-dark:#E1E4E8> bpm(u, vis):</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>            print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"No"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            return</span></span>
<span class=line></span>
<span class=line><span style=color:#6a737d;--shiki-dark:#6A737D>    # Build the directions</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    D </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> N</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> j </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(N):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        i </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> match_to[j]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> BX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[j] </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF> AX</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> BY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[j] </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF> AY</span><span style=color:#24292e;--shiki-dark:#E1E4E8>[i]</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            D[i] </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1</span><span style=color:#6a737d;--shiki-dark:#6A737D>  # Any direction</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        else</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            dx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_x </span><span style=color:#d73a49;--shiki-dark:#F97583>//</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            dy </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> delta_y </span><span style=color:#d73a49;--shiki-dark:#F97583>//</span><span style=color:#24292e;--shiki-dark:#E1E4E8> T</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            D[i] </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> direction_map[(dx, dy)]</span></span>
<span class=line></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"Yes"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    print</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>' '</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.join(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>str</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, D)))</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>threading.Thread(</span><span style=color:#e36209;--shiki-dark:#FFAB70>target</span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8>main).start()</span></span></code></pre></div><figure><img alt=result src=https://raw.githubusercontent.com/lifeodyssey/Figurebed/master/202409141933650.png><figcaption>result</figcaption></figure><h3 id=claude-35-sonnet-1>Claude 3.5 sonnet<a href=#claude-35-sonnet-1 class=heading-anchor-link aria-label="Link to Claude 3.5 sonnet"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=python style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#d73a49;--shiki-dark:#F97583>import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> sys</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>def</span><span style=color:#6f42c1;--shiki-dark:#B392F0> get_possible_directions</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(ax, ay, bx, by, t):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    dx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> bx </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ax</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    dy </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> by </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ay</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    possible </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> []</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>9</span><span style=color:#24292e;--shiki-dark:#E1E4E8>):</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        nx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ax </span><span style=color:#d73a49;--shiki-dark:#F97583>+</span><span style=color:#24292e;--shiki-dark:#E1E4E8> t </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>][d</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        ny </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ay </span><span style=color:#d73a49;--shiki-dark:#F97583>+</span><span style=color:#24292e;--shiki-dark:#E1E4E8> t </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>][d</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> nx </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#24292e;--shiki-dark:#E1E4E8> bx </span><span style=color:#d73a49;--shiki-dark:#F97583>and</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ny </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#24292e;--shiki-dark:#E1E4E8> by:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            possible.append(d)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    return</span><span style=color:#24292e;--shiki-dark:#E1E4E8> possible</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>def</span><span style=color:#6f42c1;--shiki-dark:#B392F0> solve</span><span style=color:#24292e;--shiki-dark:#E1E4E8>():</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    n, t </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>input</span><span style=color:#24292e;--shiki-dark:#E1E4E8>().split())</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    a </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>list</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>input</span><span style=color:#24292e;--shiki-dark:#E1E4E8>().split())) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(n)]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    b </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>list</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>map</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>int</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>input</span><span style=color:#24292e;--shiki-dark:#E1E4E8>().split())) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> _ </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(n)]</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    directions </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [get_possible_directions(ax, ay, bx, by, t) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (ax, ay), (bx, by) </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> zip</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(a, b)]</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> any</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>len</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(d) </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#d73a49;--shiki-dark:#F97583> for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> directions):</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        return</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "No"</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    while</span><span style=color:#005cc5;--shiki-dark:#79B8FF> True</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        changed </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> False</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> range</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(n):</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> len</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(directions[i]) </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                continue</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> directions[i][:]:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                nx </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> a[i][</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>+</span><span style=color:#24292e;--shiki-dark:#E1E4E8> t </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>][d</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                ny </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> a[i][</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>] </span><span style=color:#d73a49;--shiki-dark:#F97583>+</span><span style=color:#24292e;--shiki-dark:#E1E4E8> t </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>][d</span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (nx, ny) </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> [(ax, ay) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> j, (ax, ay) </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#005cc5;--shiki-dark:#79B8FF> enumerate</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(a) </span><span style=color:#d73a49;--shiki-dark:#F97583>if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> j </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i]:</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                    directions[i].remove(d)</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>                    changed </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> True</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                    break</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> len</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(directions[i]) </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>                return</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "No"</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        if</span><span style=color:#d73a49;--shiki-dark:#F97583> not</span><span style=color:#24292e;--shiki-dark:#E1E4E8> changed:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            break</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    if</span><span style=color:#005cc5;--shiki-dark:#79B8FF> all</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>len</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(d) </span><span style=color:#d73a49;--shiki-dark:#F97583>==</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1</span><span style=color:#d73a49;--shiki-dark:#F97583> for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> directions):</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        return</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "Yes</span><span style=color:#005cc5;--shiki-dark:#79B8FF>\n</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"</span><span style=color:#d73a49;--shiki-dark:#F97583> +</span><span style=color:#032f62;--shiki-dark:#9ECBFF> " "</span><span style=color:#24292e;--shiki-dark:#E1E4E8>.join(</span><span style=color:#005cc5;--shiki-dark:#79B8FF>str</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(d[</span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span><span style=color:#24292e;--shiki-dark:#E1E4E8>]) </span><span style=color:#d73a49;--shiki-dark:#F97583>for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> d </span><span style=color:#d73a49;--shiki-dark:#F97583>in</span><span style=color:#24292e;--shiki-dark:#E1E4E8> directions)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    else</span><span style=color:#24292e;--shiki-dark:#E1E4E8>:</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        return</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "No"</span></span></code></pre></div><figure><img alt=result src=https://raw.githubusercontent.com/lifeodyssey/Figurebed/master/202409141933697.png><figcaption>result</figcaption></figure><h2 id=summary>Summary<a href=#summary class=heading-anchor-link aria-label="Link to Summary"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h2><p>In the first round they gave actually same level code. But in the second round, claude 3.5 sonnet go to wrong direction. That is also my feeling when I’m using claude. Claude could not keep long context and always forget my promot. This make claude always have good result in a specific task without deep level logic.</p><p>ChatGPT o1-preview get excellent result when adding new cases. It reveals it’s ablitiy of self check and long context.</p><p>In this round obviously, ChatGPT o1-preview is the winner.</p><h1 id=system-design>System Design<a href=#system-design class=heading-anchor-link aria-label="Link to System Design"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h1><p>In this round I will give promot, and the question is useing the <a href=https://github.com/shams-imran/books/blob/master/System%20Design/system-design-interview-an-insiders-guide-volume-2.pdf rel="nofollow noopener noreferrer external" target=_blank>System Design Interview Volume 2 Chapter 13</a></p><blockquote><p>When searching on Google or shopping at Amazon, as you type in the search box, one or more matches for the search term are presented to you. This feature is referred to as autocomplete, typeahead, search-as-you-type, or incremental search. Figure 13-1 presents an example of a Google search showing a list of autocompleted results when “dinner” is typed into the search box. Search autocomplete is an important feature of many products.</p><p><img alt="" src="file:///Users/zhenjia.zhouthoughtworks.com/Library/Application%20Support/marktext/images/2024-09-14-18-46-48-image.png?msec=1726310808934"></p></blockquote><p>My promot is</p><blockquote><p>Please work like a senior developer and working on a system desgin. When searching on Google or shopping at Amazon, as you type in the search box, one or more matches for the search term are presented to you. This feature is referred to as autocomplete, typeahead, search-as-you-type, or incremental search. Search autocomplete is an important feature of many products. Please design a search autocomplete system for me and you can ask me key questions to complete the design.</p></blockquote><p>And whaterever they responsed for the first message, I will reply the Back of the envolop estimation from that book.</p><blockquote><p>• Assume 10 million daily active users (DAU).<br>• An average person performs 10 searches per day. • 20 bytes of data per query string:</p><p>• Assume we use ASCII character encoding. 1 character = 1 byte<br>• Assume a query contains 4 words, and each word contains 5 characters on average. • That is 4 x 5 = 20 bytes per query.</p><p>• For every character entered into the search box, a client sends a request to the backend for autocomplete suggestions. On average, 20 requests are sent for each search query. For example, the following 6 requests are sent to the backend by the time you finish typing “dinner”.</p><p>search?q=d</p><p>search?q=di</p><p>search?q=din</p><p>search?q=dinn</p><p>search?q=dinne</p><p>search?q=dinner</p><p>• ~24,000 query per second (QPS) = 10,000,000 users * 10 queries / day * 20 characters / 24 hours / 3600 seconds.</p><p>• Peak QPS = QPS * 2 = ~48,000</p><p>• Assume 20% of the daily queries are new. 10 million * 10 queries / day * 20 byte per query * 20% = 0.4 GB. This means 0.4GB of new data is added to storage daily.</p></blockquote><p>Here is the result of their second reply</p><h3 id=chatgpt-o1-preview-2>ChatGPT o1-preview<a href=#chatgpt-o1-preview-2 class=heading-anchor-link aria-label="Link to ChatGPT o1-preview"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p><strong>Designing a High-Performance Search Autocomplete System</strong></p><p>Based on the details you’ve provided, I’ll proceed to design a search autocomplete system that meets your requirements. Here’s a comprehensive design plan:</p><hr><h4 id=1-requirements-summary><strong>1. Requirements Summary</strong><a href=#1-requirements-summary class=heading-anchor-link aria-label="Link to 1. Requirements Summary"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Functional Requirements:</strong></p><ul><li><strong>Autocomplete Suggestions:</strong> Provide relevant suggestions as users type each character.</li><li><strong>High Throughput:</strong> Handle an average of 24,000 QPS, peaking at 48,000 QPS.</li><li><strong>Data Growth:</strong> Incorporate approximately 0.4 GB of new query data daily.</li><li><strong>Relevance Ranking:</strong> Rank suggestions based on relevance and popularity.</li></ul><p><strong>Non-Functional Requirements:</strong></p><ul><li><strong>Low Latency:</strong> Autocomplete suggestions should be delivered within 100 milliseconds.</li><li><strong>Scalability:</strong> System must scale horizontally to accommodate growth.</li><li><strong>High Availability:</strong> Aim for 99.9% uptime.</li><li><strong>Data Freshness:</strong> New queries should be reflected in suggestions promptly.</li></ul><h4 id=2-high-level-architecture><strong>2. High-Level Architecture</strong><a href=#2-high-level-architecture class=heading-anchor-link aria-label="Link to 2. High-Level Architecture"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><pre class=mermaid>flowchart TD
    subgraph User_Interaction
        A["Clients&#x3C;br/>(Web/Mobile Apps)"]
    end
    subgraph Backend_Services
        B[Load Balancer]
        C[Autocomplete Servers]
        D["In-Memory Data Store&#x3C;br/>(Redis/Elasticsearch)"]
        E["Persistent Storage&#x3C;br/>(NoSQL Database)"]
        F["Data Pipeline&#x3C;br/>(Kafka/Spark)"]
        G[Monitoring &#x26; Analytics Tools]
    end

    A --> B --> C
    C -->|Query &#x26; Update| D
    C -->|Log Queries| E
    E --> F
    F -->|Update Indexes| D
    C --> G
    F --> G
</pre><p><strong>Components:</strong></p><ol><li><strong>Clients (Web/Mobile Apps):</strong> Users interact with the search box.</li><li><strong>Load Balancer:</strong> Distributes incoming requests across autocomplete servers.</li><li><strong>Autocomplete Servers:</strong> Backend servers handling autocomplete logic.</li><li><strong>In-Memory Data Store (Redis/ElasticSearch):</strong> Stores trie structures or indices for fast lookup.</li><li><strong>Persistent Storage (NoSQL Database):</strong> Stores query logs and user data.</li><li><strong>Data Pipeline (Kafka/Spark):</strong> Processes new queries and updates indices.</li><li><strong>Monitoring &#x26; Analytics Tools:</strong> Tracks system performance and user behavior.</li></ol><hr><h4 id=3-data-modeling><strong>3. Data Modeling</strong><a href=#3-data-modeling class=heading-anchor-link aria-label="Link to 3. Data Modeling"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Query Representation:</strong></p><ul><li><strong>Queries:</strong> Average of 20 bytes per query.</li><li><strong>Storage Requirement:</strong> For 100 million queries/day, total storage is about 2 GB/day (including metadata).</li></ul><p><strong>Trie Data Structure:</strong></p><ul><li>Use a <strong>compressed trie (prefix tree)</strong> to efficiently store and retrieve query suggestions based on prefixes.</li><li><strong>Nodes:</strong> Represent characters.</li><li><strong>Edges:</strong> Connect characters to form words.</li><li><strong>Leaves:</strong> Contain complete query strings and metadata like frequency.</li></ul><p><strong>Ranking Metadata:</strong></p><ul><li><strong>Frequency Counts:</strong> Number of times a query has been searched.</li><li><strong>Timestamp:</strong> Recency of the query to boost newer trends.</li><li><strong>User Engagement Metrics:</strong> Click-through rates if available.</li></ul><hr><h4 id=4-autocomplete-logic><strong>4. Autocomplete Logic</strong><a href=#4-autocomplete-logic class=heading-anchor-link aria-label="Link to 4. Autocomplete Logic"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Suggestion Retrieval:</strong></p><ul><li>As the user types, the client sends the current prefix to the server.</li><li>The server looks up the prefix in the in-memory trie.</li><li>Retrieves top N suggestions based on ranking criteria.</li></ul><p><strong>Ranking Criteria:</strong></p><ol><li><strong>Popularity:</strong> Higher frequency queries are ranked higher.</li><li><strong>Recency:</strong> Recent queries get a slight boost.</li><li><strong>Personalization (Optional):</strong> Tailor suggestions based on user’s history.</li></ol><p><strong>Handling Typos and Synonyms (Advanced):</strong></p><ul><li>Implement fuzzy matching algorithms like <strong>Levenshtein Distance</strong>.</li><li>Use <strong>probabilistic data structures</strong> like Bloom filters for quick typo detection.</li></ul><hr><h4 id=5-scalability-and-performance><strong>5. Scalability and Performance</strong><a href=#5-scalability-and-performance class=heading-anchor-link aria-label="Link to 5. Scalability and Performance"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Distributed Tries:</strong></p><ul><li><strong>Sharding:</strong> Split the trie across multiple servers based on hash of the prefix or first character(s).</li><li><strong>Replication:</strong> Replicate shards to multiple servers for fault tolerance.</li></ul><p><strong>Caching Strategies:</strong></p><ul><li><strong>Local Cache:</strong> Use LRU caches on each server for most frequently accessed prefixes.</li><li><strong>CDN Edge Caching:</strong> For static suggestions, cache responses closer to the user.</li></ul><p><strong>Load Balancing:</strong></p><ul><li>Employ load balancers (e.g., <strong>NGINX</strong>, <strong>HAProxy</strong>) to distribute traffic evenly.</li><li>Use health checks and automatic failover mechanisms.</li></ul><hr><h4 id=6-data-pipeline-for-updates><strong>6. Data Pipeline for Updates</strong><a href=#6-data-pipeline-for-updates class=heading-anchor-link aria-label="Link to 6. Data Pipeline for Updates"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Real-Time Data Ingestion:</strong></p><ul><li>Use <strong>Apache Kafka</strong> to stream new queries as they happen.</li><li><strong>Consumers</strong> process the stream and update in-memory data stores.</li></ul><p><strong>Batch Processing:</strong></p><ul><li>Schedule jobs using <strong>Apache Spark</strong> to process daily query logs.</li><li>Update frequency counts and rebuild indices if necessary.</li></ul><p><strong>Data Consistency:</strong></p><ul><li>Since we’re dealing with high read/write volumes, implement <strong>eventual consistency</strong>.</li><li>Use <strong>distributed locks</strong> or <strong>versioning</strong> to handle concurrent updates.</li></ul><hr><h4 id=7-infrastructure-and-technology-stack><strong>7. Infrastructure and Technology Stack</strong><a href=#7-infrastructure-and-technology-stack class=heading-anchor-link aria-label="Link to 7. Infrastructure and Technology Stack"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Servers:</strong></p><ul><li>Use <strong>stateless</strong> microservices for the autocomplete servers.</li><li>Written in performance-optimized languages like <strong>Go</strong> or <strong>Java</strong>.</li></ul><p><strong>In-Memory Data Store:</strong></p><ul><li><strong>Redis Cluster</strong> or <strong>Elasticsearch</strong> for fast read/write operations.</li><li><strong>Redis:</strong> Suitable for simple key-value storage with pub/sub capabilities.</li><li><strong>Elasticsearch:</strong> Provides advanced search capabilities and supports sharding out of the box.</li></ul><p><strong>Persistent Storage:</strong></p><ul><li><strong>NoSQL Databases</strong> like <strong>Cassandra</strong> or <strong>MongoDB</strong> to store query logs.</li><li>Designed for high write throughput and horizontal scalability.</li></ul><p><strong>Messaging System:</strong></p><ul><li><strong>Apache Kafka</strong> for handling real-time data streams.</li></ul><p><strong>Containerization and Orchestration:</strong></p><ul><li>Use <strong>Docker</strong> for containerization.</li><li><strong>Kubernetes</strong> or <strong>Docker Swarm</strong> for orchestration and deployment.</li></ul><hr><h4 id=8-handling-high-qps><strong>8. Handling High QPS</strong><a href=#8-handling-high-qps class=heading-anchor-link aria-label="Link to 8. Handling High QPS"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Concurrency:</strong></p><ul><li>Implement <strong>asynchronous I/O</strong> and non-blocking operations.</li><li>Optimize thread pools and connection handling.</li></ul><p><strong>Scaling Strategy:</strong></p><ul><li><strong>Horizontal Scaling:</strong> Add more servers during peak times.</li><li><strong>Auto-Scaling Groups:</strong> Automatically scale based on CPU usage or network I/O.</li></ul><p><strong>Optimization:</strong></p><ul><li><strong>Efficient Algorithms:</strong> Optimize trie traversal and minimize memory usage.</li><li><strong>Compression:</strong> Use techniques like <strong>DAWG (Directed Acyclic Word Graph)</strong> to reduce duplication.</li></ul><hr><h4 id=9-latency-minimization><strong>9. Latency Minimization</strong><a href=#9-latency-minimization class=heading-anchor-link aria-label="Link to 9. Latency Minimization"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Geographical Distribution:</strong></p><ul><li>Deploy servers in multiple regions closer to users.</li><li>Use <strong>Anycast DNS</strong> to route users to the nearest server.</li></ul><p><strong>Network Optimizations:</strong></p><ul><li>Keep response payloads small.</li><li>Use <strong>HTTP/2</strong> for multiplexing and header compression.</li></ul><hr><h4 id=10-data-freshness-and-updates><strong>10. Data Freshness and Updates</strong><a href=#10-data-freshness-and-updates class=heading-anchor-link aria-label="Link to 10. Data Freshness and Updates"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Incremental Updates:</strong></p><ul><li>Apply updates to the in-memory trie without full reloads.</li><li>Use <strong>lock-free</strong> data structures or <strong>copy-on-write</strong> mechanisms.</li></ul><p><strong>Full Rebuilds:</strong></p><ul><li>Schedule off-peak times for full trie rebuilds if necessary.</li><li>Deploy new versions atomically to avoid downtime.</li></ul><hr><h4 id=11-monitoring-and-alerting><strong>11. Monitoring and Alerting</strong><a href=#11-monitoring-and-alerting class=heading-anchor-link aria-label="Link to 11. Monitoring and Alerting"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Metrics Collection:</strong></p><ul><li>Use <strong>Prometheus</strong> for metrics gathering.</li><li>Monitor QPS, latency, error rates, CPU/memory usage.</li></ul><p><strong>Logging:</strong></p><ul><li>Centralize logs using the <strong>ELK Stack</strong> (Elasticsearch, Logstash, Kibana).</li><li>Implement log rotation and archival policies.</li></ul><p><strong>Alerting:</strong></p><ul><li>Set up alerts via <strong>Grafana</strong> or <strong>PagerDuty</strong> for critical issues.</li><li>Implement thresholds for anomalies in traffic or resource usage.</li></ul><hr><h4 id=12-security-and-compliance><strong>12. Security and Compliance</strong><a href=#12-security-and-compliance class=heading-anchor-link aria-label="Link to 12. Security and Compliance"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Data Protection:</strong></p><ul><li>Encrypt data at rest and in transit using <strong>TLS</strong>.</li><li>Comply with data regulations like <strong>GDPR</strong> or <strong>CCPA</strong>.</li></ul><p><strong>Access Control:</strong></p><ul><li>Implement <strong>API authentication</strong> using tokens or API keys.</li><li>Use <strong>RBAC (Role-Based Access Control)</strong> for internal services.</li></ul><p><strong>Input Validation:</strong></p><ul><li>Sanitize all inputs to prevent injection attacks.</li><li>Implement rate limiting to prevent abuse.</li></ul><hr><h4 id=13-optional-features><strong>13. Optional Features</strong><a href=#13-optional-features class=heading-anchor-link aria-label="Link to 13. Optional Features"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Personalization:</strong></p><ul><li>If user authentication is available, personalize suggestions.</li><li>Store user profiles securely and respect privacy settings.</li></ul><p><strong>Multi-Language Support:</strong></p><ul><li>Use Unicode encoding to support multiple languages.</li><li>Implement language detection and load appropriate trie structures.</li></ul><p><strong>Machine Learning Integration:</strong></p><ul><li>Use ML models to predict user intent.</li><li>Continuously train models on collected query data.</li></ul><hr><h4 id=14-development-and-deployment-plan><strong>14. Development and Deployment Plan</strong><a href=#14-development-and-deployment-plan class=heading-anchor-link aria-label="Link to 14. Development and Deployment Plan"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Phase 1: MVP Development (1-2 Months)</strong></p><ul><li>Implement basic autocomplete functionality.</li><li>Set up infrastructure and basic monitoring.</li></ul><p><strong>Phase 2: Scaling and Optimization (2-3 Months)</strong></p><ul><li>Optimize data structures and algorithms.</li><li>Implement sharding and replication.</li></ul><p><strong>Phase 3: Advanced Features and Fine-Tuning (2 Months)</strong></p><ul><li>Add personalization and machine learning components.</li><li>Enhance security measures and compliance checks.</li></ul><hr><h4 id=15-cost-considerations><strong>15. Cost Considerations</strong><a href=#15-cost-considerations class=heading-anchor-link aria-label="Link to 15. Cost Considerations"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p><strong>Infrastructure Costs:</strong></p><ul><li>Optimize instance types and sizes.</li><li>Use reserved instances for cost savings on cloud providers.</li></ul><p><strong>Data Storage Costs:</strong></p><ul><li>Compress logs and use lifecycle policies to move older data to cheaper storage.</li></ul><p><strong>Operational Costs:</strong></p><ul><li>Automate as much as possible to reduce manual intervention.</li><li>Use open-source tools where feasible to reduce licensing fees.</li></ul><hr><h4 id=conclusion><strong>Conclusion</strong><a href=#conclusion class=heading-anchor-link aria-label="Link to Conclusion"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h4><p>The proposed design addresses the high throughput and low latency requirements by utilizing efficient data structures, in-memory caching, and a scalable distributed architecture. By incorporating real-time data processing and advanced ranking algorithms, the system will provide relevant and timely autocomplete suggestions to users.</p><hr><p><strong>Next Steps:</strong></p><ul><li><strong>Prototype Development:</strong> Build a small-scale version to test core functionalities.</li><li><strong>Load Testing:</strong> Simulate traffic to ensure the system meets QPS requirements.</li><li><strong>Iteration:</strong> Refine based on testing results and user feedback.</li></ul><p>Please let me know if you’d like to delve deeper into any specific component or have additional requirements to consider.</p><h3 id=claude-35-sonnet-2>Claude 3.5 sonnet<a href=#claude-35-sonnet-2 class=heading-anchor-link aria-label="Link to Claude 3.5 sonnet"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>Thank you for providing these detailed requirements. This gives us a clear picture of the scale and performance needs of the system. Let’s design the autocomplete system based on this information.</p><pre class=mermaid>graph TD
    A[Client] -->|HTTP Request| B[Load Balancer]
    B --> C[API Gateway]
    C --> D[Application Servers]
    D --> E[Cache Layer]
    E --> F[Trie Service]
    F --> G[Trie Data Store]
    D --> H[Analytics Service]
    H --> I[Analytics DB]
    J[Offline Data Processing] --> G
    J --> I
</pre><p>Based on the requirements you’ve provided, here’s a high-level design for the autocomplete system:</p><ol><li><p>Client: The user interface where queries are entered.</p></li><li><p>Load Balancer: Distributes incoming requests across multiple API Gateways to ensure high availability and even load distribution.</p></li><li><p>API Gateway: Handles incoming requests, performs rate limiting, and routes requests to the appropriate services.</p></li><li><p>Application Servers: Process incoming requests, interact with the cache and Trie service, and return results to the client.</p></li><li><p>Cache Layer: Stores frequently accessed autocomplete results to reduce latency and load on the backend services.</p></li><li><p>Trie Service: Manages the Trie data structure used for efficient prefix matching.</p></li><li><p>Trie Data Store: Persistent storage for the Trie data structure.</p></li><li><p>Analytics Service: Collects and processes query data for improving autocomplete suggestions.</p></li><li><p>Analytics DB: Stores processed query data for analysis and offline processing.</p></li><li><p>Offline Data Processing: Periodically updates the Trie with new and trending searches.</p></li></ol><p>Now, let’s dive into some key components and considerations:</p><p>Data Structure: We’ll use a Trie (prefix tree) as the core data structure. It’s efficient for prefix matching and can be easily updated.</p><p>Trie Service:</p><ul><li>Handles prefix matching operations.</li><li>Supports fast lookups and updates.</li><li>Can be horizontally scaled for high availability and performance.</li></ul><p>Caching:</p><ul><li>Use a distributed cache like Redis to store frequent autocomplete results.</li><li>Implement an LRU (Least Recently Used) eviction policy.</li><li>Cache hit rate should be high due to the power-law distribution of search queries.</li></ul><p>Application Servers:</p><ul><li>Stateless servers that can be easily scaled horizontally.</li><li>Handle request processing, cache interactions, and Trie service calls.</li></ul><p>Analytics and Data Processing:</p><ul><li>Collect query data for offline processing.</li><li>Periodically update the Trie with new and trending searches.</li><li>Use techniques like Lossy Counting for efficient processing of streaming data.</li></ul><p>Handling Scale and Performance:</p><ul><li>With 48,000 peak QPS, we need a distributed system that can handle this load.</li><li>Use consistent hashing for distributing data across multiple Trie servers.</li><li>Implement aggressive caching to reduce load on backend services.</li></ul><p>Data Freshness:</p><ul><li>Implement a real-time pipeline for urgent updates (e.g., breaking news).</li><li>Use a batch processing pipeline for less time-sensitive updates.</li></ul><p>Fault Tolerance and High Availability:</p><ul><li>Implement data replication for the Trie data store.</li><li>Use multiple data centers for geographical redundancy.</li><li>Implement circuit breakers to handle failures gracefully.</li></ul><p>This design should meet the scale and performance requirements you’ve outlined. The system can handle the high QPS, provide low-latency responses through caching, and accommodate the daily data growth of 0.4GB.</p><p>Would you like me to elaborate on any specific part of this design or discuss any particular challenges you foresee?</p><h2 id=summary-1>Summary<a href=#summary-1 class=heading-anchor-link aria-label="Link to Summary"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h2><p>In my perspective, ChatGPT o1-preview showed strong technical skills but may have over-engineered the solution, which could be a concern for practical implementation. Claude 3.5 sonnet, while practical and concise, might not have fully addressed the scalability needs for this large-scale system.</p><p>I would say ChatGPT o1-preview is better as it correctly understand my requirement of DAU.</p><h1 id=conclusion-1>Conclusion<a href=#conclusion-1 class=heading-anchor-link aria-label="Link to Conclusion"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h1><p>ChatGPT o1-preview excels in both algorithm and system design. I will stop claude 3.5 sonnet subscription and continue using ChatGPT now.</p><div id=post-copyright></div><div class="mt-12.6 uno-decorative-line"></div><div class="no-heti flex flex-wrap gap-x-3 gap-y-3.2"><a href=/tags/随便写写/ class="hover:c-primary border border-secondary/25 ease-out hover:border-secondary/80 hover:font-medium hover:ring-0.2 inline-block px-3.2 py-0.7 relative ring-0 ring-secondary/80 rounded-full transition-[colors,box-shadow]"><span class="flex absolute inset-0 items-center justify-center transition-font-weight whitespace-nowrap">随便写写 </span><span class="inline-block font-medium opacity-0" aria-hidden=true>随便写写</span></a></div></div></article></main><footer class="leading-1.25em font-navbar lg:text-3.5 text-3" lg="uno-desktop-column bottom-20"><p><a href=/atom.xml/ class="highlight-hover hover:c-primary after:bottom-0.35em py-0.8 transition-colors" rel="noopener noreferrer" target=_blank>RSS</a>&nbsp;/ <a href=https://github.com/lifeodyssey class="highlight-hover hover:c-primary after:bottom-0.35em py-0.8 transition-colors" rel="noopener noreferrer" target=_blank>GitHub</a>&nbsp;/ <a href=mailto:email@radishzz.cc class="highlight-hover hover:c-primary after:bottom-0.35em py-0.8 transition-colors" rel="noopener noreferrer" target=_blank>Email</a>&nbsp;</p><p>© 2025-2026 周大侠</p><p>Powered by <a href=https://astro.build/ class="highlight-hover hover:c-primary after:bottom-0.35em py-0.8 transition-colors" rel="noopener noreferrer" target=_blank>Astro</a> and <a href=https://github.com/radishzzz/astro-theme-retypeset class="highlight-hover hover:c-primary after:bottom-0.35em py-0.8 transition-colors" rel="noopener noreferrer" target=_blank>Retypeset</a></p></footer></div><div class="flex absolute gap-6 lg:bottom-[min(10.27rem+1.92vw,12rem)] lg:fixed lg:right-[max(5rem,calc(50vw-35rem))] lg:top-auto lg:w-14rem min-[823px]:max-lg:right-[calc(50vw-22rem)] right-7.25vw top-14.6"><a href=/posts/aec625cb.html.html/ class="hover:c-primary active:scale-90 aspect-square c-secondary w-4" aria-label="Switch website language" id=language-switcher><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M19.18 21.1 12.4 1.89h-1.21L4.52 21.1l-2.53.2v.81h6.37v-.81l-2.83-.2 2.02-5.97h7.58l2.02 5.97-3.34.2v.81H22v-.81l-2.83-.2zM7.85 14.33l3.44-10.21 3.54 10.21z"/></svg> </a><button aria-label="Switch light/dark theme" class="hover:c-primary active:scale-90 aspect-square c-secondary w-4" id=theme-toggle-button><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M12.06.61C5.66.61.46 5.71.46 12.11s5.1 11.5 11.6 11.5 11.5-5.1 11.5-11.5S18.46.61 12.06.61m0 21c-6.07 0-10.94-4.2-10.94-9.5s4.87-9.4 10.94-9.4S23 6.91 23 12.21s-4.88 9.4-10.94 9.4"/></svg></button></div><script>!function(){const e="oklch(96% 0.005 298)",t="oklch(22% 0.005 298)";function n(n){document.documentElement.classList.toggle("dark",n);const o=document.head.querySelector('meta[name="theme-color"]');o&&e&&t&&o.setAttribute("content",n?t:e),localStorage.setItem("theme",n?"dark":"light"),document.dispatchEvent(new Event("theme-changed"))}function o(){n(!document.documentElement.classList.contains("dark"))}document.addEventListener("click",(function(e){const t=e.target instanceof Element?e.target:null,n=t?.closest("#theme-toggle-button");if(!n)return;if(document.documentElement.classList.contains("reduce-motion"))return void o();document.documentElement.style.setProperty("view-transition-name","animation-theme-toggle"),document.documentElement.setAttribute("data-theme-changing",""),document.startViewTransition(o).finished.then((()=>{document.documentElement.style.removeProperty("view-transition-name"),document.documentElement.removeAttribute("data-theme-changing")}))}),{passive:!0}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{n(e.matches)}))}()</script><script type=module>const o={click:"tap",typing:"type"},l={[o.click]:.8,[o.typing]:.4},d=["#language-switcher","#theme-toggle-button"],f=[".el-input__inner",".el-textarea__inner","#wl-nick","#wl-mail","#wl-link","#wl-edit"],h=new Set(["Shift","Control","Alt","Meta","Tab","Escape","CapsLock"]),p=d.join(","),g=f.join(",");function r(){return window.matchMedia("(max-width: 1023px)").matches}function w(){return document.head.querySelector('link[rel="sitemap"]')?.getAttribute("href")?.replace("/sitemap-index.xml","")||""}class y{audioContext=null;audioBuffers={[o.click]:[],[o.typing]:[]};initPromise=null;async fetchAndCacheSound(t,e){if(!this.audioContext)throw new Error("Audio context not initialized");const n=`${t}_0${e+1}`,i=await(await fetch(`${w()}/sounds/${n}.wav`)).arrayBuffer(),a=await this.audioContext.decodeAudioData(i);this.audioBuffers[t].push(a)}async preloadAllSounds(){const t=Object.values(o).flatMap((t=>Array.from({length:5},((e,n)=>this.fetchAndCacheSound(t,n)))));await Promise.allSettled(t)}async initialize(){return this.initPromise??=(async()=>{const t=window.AudioContext||window.webkitAudioContext;this.audioContext=new t,await this.preloadAllSounds()})()}async playSound(t){try{if(await this.initialize(),!this.audioContext)return;"suspended"===this.audioContext.state&&await this.audioContext.resume();const e=this.audioBuffers[t];if(0===e.length)return;const n=this.audioContext.createBufferSource();n.buffer=e[Math.floor(Math.random()*e.length)];const i=this.audioContext.createGain();i.gain.value=l[t],n.connect(i).connect(this.audioContext.destination),n.start(0)}catch(t){console.warn("Sound playback failed:",t)}}}const c=new y;function m(t){r()||!t.target?.closest(p)||c.playSound(o.click)}function x(t){r()||t.ctrlKey||t.altKey||t.metaKey||h.has(t.key)||!t.target?.closest(g)||c.playSound(o.typing)}document.addEventListener("click",m,{passive:!0}),document.addEventListener("keydown",x,{passive:!0})</script><script type=module>const s={copy:'<svg\n      viewBox="0 0 24 24"\n      fill="currentColor"\n    >\n      <path d="M6.9.8v18h14.5V.8zm12.8 16h-11v-14h11z"/>\n      <path d="M4.3 21.2V5.6l-1.7.5v17.1h14.3l.6-2z"/>\n    </svg>',success:'<svg\n      viewBox="0 0 24 24"\n      fill="currentColor"\n    >\n      <path d="m23.1 6.4-1.3-1.3L9.4 16.6l-6.3-5.4-1.2 1.2L9.4 20z"/>\n    </svg>'},o=new WeakMap;function r(){const e=document.querySelectorAll(".code-copy-button");0!==e.length&&e.forEach((e=>{e.innerHTML=s.copy}))}async function a(e){if(e.classList.contains("copy-success"))return;const t=e.parentElement?.querySelector("pre code"),n=t?.textContent??"";if(t&&n)try{await navigator.clipboard.writeText(n);const t=o.get(e);t&&clearTimeout(t),e.innerHTML=s.success,e.classList.add("copy-success");const c=setTimeout((()=>{e.isConnected&&(e.innerHTML=s.copy,e.classList.remove("copy-success"),o.delete(e))}),1500);o.set(e,c)}catch(e){console.error("Failed to copy code",e)}}function l(e){const t=e.target instanceof Element&&e.target.closest(".code-copy-button");t&&a(t)}document.addEventListener("astro:page-load",r),document.addEventListener("click",l,{passive:!0}),r()</script><script type=module>async function p(t){const e=t.dataset.repo;if(!e)return;const o=t.getElementsByClassName("gc-owner-avatar")[0],n=t.getElementsByClassName("gc-repo-description")[0],s=t.getElementsByClassName("gc-stars-count")[0],a=t.getElementsByClassName("gc-forks-count")[0],r=t.getElementsByClassName("gc-license-info")[0];function c(t){const e=new Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1});o&&t.owner?.avatar_url&&(o.style.backgroundImage=`url(${t.owner.avatar_url})`),n&&(n.textContent=t.description??"No description"),s&&(s.textContent=e.format(t.stargazers_count??0)),a&&(a.textContent=e.format(t.forks_count??0)),r&&(r.textContent=t.license?.spdx_id??"No License")}const i=`github-repo-${e}`,m=sessionStorage.getItem(i);if(m){c(JSON.parse(m))}else try{const t=await fetch(`https://api.github.com/repos/${e}`);if(!t.ok){if(n){const e=404===t.status?"Repository not found":"Failed to load repository data";n.textContent=e}return}const o=await t.json();sessionStorage.setItem(i,JSON.stringify(o)),c(o)}catch(t){console.error(`Failed to fetch ${e}:`,t)}}function f(){const t=document.getElementsByClassName("gc-container");0!==t.length&&Array.from(t).forEach((t=>{p(t)}))}document.addEventListener("astro:page-load",f),f()</script><script type=module src=/_astro/MediaEmbed.astro_astro_type_script_index_0_lang.wKrCMCCr.js></script><script type=module>const n={overlay:document.querySelector(".zoom-overlay"),zoomedImg:null,originalImg:null,createOverlay(){this.overlay&&this.overlay.isConnected||(this.overlay=document.createElement("div"),this.overlay.classList.add("zoom-overlay"),this.overlay.setAttribute("role","dialog"),this.overlay.setAttribute("aria-modal","true"),this.overlay.setAttribute("aria-label","Image Viewer"),this.overlay.setAttribute("tabindex","-1"),Object.assign(this.overlay.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",zIndex:"999",backgroundColor:"oklch(var(--un-preset-theme-colors-background) / 0.95)",opacity:"0",transition:"opacity 300ms cubic-bezier(0.4, 0, 0.2, 1)",cursor:"zoom-out",display:"none"}),document.body.appendChild(this.overlay))},zoomImg(e){if(!this.overlay)return;document.body.style.overflow="hidden";const t=e.getBoundingClientRect();this.originalImg=e,this.zoomedImg=e.cloneNode(),Object.assign(this.zoomedImg.style,{position:"fixed",top:`${t.top}px`,left:`${t.left}px`,width:`${t.width}px`,height:`${t.height}px`,transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1)",zIndex:"1000",cursor:"zoom-out"}),document.body.appendChild(this.zoomedImg),this.overlay.style.display="block",this.overlay.focus();const o=window.innerWidth,i=window.innerHeight,s=window.innerWidth<768?1:.8,l=Math.min(o*s/t.width,i*s/t.height),a=(-t.left+(o-t.width)/2)/l,n=(-t.top+(i-t.height)/2)/l;requestAnimationFrame((()=>{this.overlay&&(this.overlay.style.opacity="1"),this.zoomedImg&&(this.zoomedImg.style.transform=`scale(${l}) translate3d(${a}px, ${n}px, 0)`)}))},close(){!this.overlay||!this.zoomedImg||!this.originalImg||(this.zoomedImg.style.transform="",this.overlay.style.opacity="0",document.body.style.overflow="",setTimeout((()=>{this.zoomedImg&&this.zoomedImg.parentNode&&document.body.removeChild(this.zoomedImg),this.zoomedImg=null,this.overlay&&(this.overlay.style.display="none"),this.originalImg&&this.originalImg.focus(),this.originalImg=null}),300))},setupOverlay(){this.createOverlay(),this.zoomedImg=null,this.originalImg=null},handleClick(e){if(this.zoomedImg)return void this.close();const t=e.target;t instanceof HTMLImageElement&&t.complete&&t.naturalWidth>=100&&t.naturalHeight>=100&&this.zoomImg(t)},handleResize(){this.zoomedImg&&this.close()},init(){this.createOverlay(),document.addEventListener("astro:page-load",(()=>this.setupOverlay())),document.addEventListener("click",(e=>this.handleClick(e)),{passive:!0}),window.addEventListener("resize",(()=>this.handleResize()),{passive:!0})}};n.init()</script></body></html>